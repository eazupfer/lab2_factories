{"filter":false,"title":"add_embeddings.py","tooltip":"/lab2_factories/app/add_embeddings.py","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["import json","from models.cosine_similarity_model import EmailSimilarityModel","","# Initialize the embedding generator","similarity_model = EmailSimilarityModel()","","# Load existing emails","with open(\"data/emails.json\", \"r\") as f:","    emails = json.load(f)","","# Add embeddings if missing","for email in emails:","    if \"embedding\" not in email or email[\"embedding\"] is None:","        text = f\"{email['subject']} {email['body']}\"","        email[\"embedding\"] = similarity_model._get_embedding(text).tolist()","","# Save back to the file","with open(\"data/emails.json\", \"w\") as f:","    json.dump(emails, f, indent=2)","","print(\"Embeddings added for all emails.\")",""],"id":1}],[{"start":{"row":21,"column":0},"end":{"row":22,"column":0},"action":"insert","lines":["",""],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":22,"column":0},"end":{"row":22,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1758506258713,"hash":"a06148a3c54cda3dfaee08a2461df63a27084dc6"}